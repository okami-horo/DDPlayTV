## Context

播放设置的“弹幕参数设置”由 `player_component` 的 `SettingDanmuConfigureView` 承载。当前“弹幕行数限制”使用：

- `TextView`（无限制）+ `EditText`（输入行数）组合
- 保存触发点依赖输入法 `IME_ACTION_DONE` 或点击“无限制”

该方案在 TV 端不友好：遥控器输入数字成本高、需要额外确认、焦点在输入框内时导航体验差。

## Goals / Non-Goals

**Goals**

1. TV UI mode 下，“弹幕行数限制”不依赖数字输入框；用户可仅通过 DPAD 完成配置。
2. 配置切换后立即生效：更新渲染参数 + 持久化，无需额外确认按钮/输入法 Done。
3. 保持滚动/顶部/底部弹幕三类配置语义一致、互不影响。
4. TV 端焦点导航无死角：从开关 → 行数限制 →（滚动模式下）同屏数量等路径可达且可返回。

**Non-Goals**

- 不在本提案中重做“同屏数量限制”的输入交互（除非与行数限制的焦点流转产生强耦合问题）。
- 不引入全新的设置框架/页面结构调整，仅针对“行数限制”子区域做 TV 友好化改造。

## Decisions

### 1) TV 端采用“左右切换/步进”控件

在 TV UI mode 下，将“行数限制”展示为单一焦点控件（或同一组控件），支持：

- **DPAD_LEFT**：切换到更小的行数（或更靠前的预设选项）
- **DPAD_RIGHT**：切换到更大的行数（或更靠后的预设选项）
- 取值语义：
  - `0` 表示无限制（渲染侧映射为 `null`）
  - `>0` 表示最大行数
  - TV 端取值范围固定为 `0..12`（`12` 为最大行数）

实现上优先复用现有 `SettingDanmuConfigureView` 的按键分发逻辑，在“行数限制控件获得焦点”时消费左右键用于改值；上下键用于切换焦点到相邻设置项。

### 2) 移动端保留原有输入

移动端继续保留 `EditText` 输入方式，不改变其保存触发点（`IME_ACTION_DONE`）。TV 与非 TV 的 UI 差异通过运行时 `Context.isTelevisionUiMode()` 进行显隐/交互分流，避免引入大规模 layout 复制。

### 3) 值域与切换策略

为兼顾“可用性 vs 切换成本”，优先采用以下策略之一（实现阶段选定并在评审时确认）：

- **策略 A（预设列表）**：`无限制(0)` + 一组常用行数（例如 `1..10` 中的若干值），左右键在列表中移动。
- **策略 B（连续步进）**：`0..N` 连续整数步进（`0`=无限制），左右键 `±1` 调整，`N` 取 10~20 的安全上限。

两种策略均满足“无需输入、立即生效”，差异在于可达性与切换次数。倾向先落地策略 B（连续步进，覆盖面更完整），必要时再叠加“长按/加速步进”等优化（不在本提案范围内）。

本提案最终选择策略 B，并确定 `N = 12`（即 `0..12` 连续步进，`0` 为无限制）。

## Risks / Trade-offs

- **焦点流转复杂**：行数限制区域从“两个焦点（无限制/输入框）”变为“一个焦点（步进控件）”后，需要同步调整 `handleKeyCode`，并验证滚动/顶部/底部三种模式下的上下导航一致。
- **步进上限选择**：上限过小限制用户；过大导致切换次数增加。通过选择合理上限（例如 12/15）降低风险。
- **行为一致性**：TV 与移动端交互不同，需确保最终持久化值与渲染语义一致（`0`=无限制）。

## Open Questions

（无）
